<!DOCTYPE html>
<html lagn="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>제조기록서</title>

  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="/css/desktop.css"/>
  <link rel="stylesheet" href="css/custom.css"/>

  <script src="/js/jquery.min.js"></script>

</head>

<body>
<div class="container is-header">
  <!-- nav -->
  <!-- [ Header ] start -->
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="navbar-logo">
      <a class="navbar-link" href="/" rel="noopener">
        <span class="logo is-gsitm-hr is-medium">
          <svg id="svgKgcLogo"><use href="#logo-kgc"></use></svg>
        </span>
      </a>
    </div>
    <div class="navbar-menu">
      <ul class="navbar-left" id="headerMenu">
        <li class="navbar-item" data-target="dom">
          <a class="navbar-link" href="#" aria-current="page" rel="noopener">
            <span class="icon is-person-check is-medium">
              <svg id="svgClipboard"><use href="#clipboard"></use></svg>
            </span>
            <span>문서관리</span>
          </a>
        </li>
        <li class="navbar-item" data-target="com">
          <a class="navbar-link" href="#" aria-current="page" rel="noopener">
            <span class="icon is-person-check is-medium">
              <svg id="svgWindowGear"><use href="#window-gear"></use></svg>
            </span>
            <span>공통관리</span>
          </a>
        </li>
      </ul>
      <ul class="navbar-right">
        <li class="navbar-item">
          <a class="navbar-link" id="btnsiteMap" href="#" aria-current="page" rel="noopener"></a>
        </li>
        <li class="navbar-item">
          <a class="navbar-link" id="headerEmplSearch" href="#" aria-current="page" rel="noopener">
            <div class="control is-x-large has-icon-right" style="width: 150px;">
              <input id="inputEmplSearch" type="text" th:placeholder="사원검색" class="input" disabled/>
              <span class="icon is-search is-large">
                  <svg id="svgSearch"><use href="#search"></use></svg>
              </span>
            </div>
          </a>
        </li>
        <li class="navbar-item">
          <a class="navbar-link" href="#" aria-current="page" rel="noopener">
            <span class="icon is-logout is-medium">
                <svg id="svgLogout"><use href="#logout"></use></svg>
            </span>
          </a>
        </li>
      </ul>
    </div>
  </nav>
  <!-- [ Header ] end -->

  <!-- side -->
  <div class="container is-page" id="mainBody">
    <div class="columns is-page">
      <!-- [ navigation menu ] start -->
      <aside class="left-navbar is-active">
        <div class="profile">
          <div class="columns">
            <figure id="_psmstrPhotoPicture" class="id-photo">
              <img id="_psmstrPhotoImg" src="/img/jpg/user-photo-default@2x.jpg" alt="사용자 사진" class="profile-photo"/>
            </figure>
            <div class="profile-content">
              <p class="profile-personnel">
                <span id="_profile_userNm" class="profile-name">테스트</span>
                <span id="_profile_posiNm" class="profile-position">관리자</span>
                <button id="btnProfileSetting" class="button is-setting is-ghost">
                  <span class="icon is-setting is-filled is-white is-medium">
                    <svg id="svgSettingsFilled"><use href="#settings-filled"></use></svg>
                  </span>
                </button>
              </p>
              <p class="profile-personnel">
                <span class="profile-id" id="_profile_userId">testId</span>
                <span class="profile-divider">|</span>
                <span class="profile-team" id="_profile_deptNm">인사팀</span>
              </p>
              <p id="_profile_emailAd" class="profile-email" style="font-size: smaller;"></p>
            </div>
          </div>
          <div class="field">
            <div class="control is-x-large has-icon-right">
              <input id="menuSearch" type="text" th:placeholder="메뉴검색" class="input" autocomplete="off" disabled/>
              <span class="icon is-search is-large">
                <svg id="svgSearch_2"><use href="#search"></use></svg>
              </span>
              <ul class="search-result"></ul>
            </div>
          </div>
        </div>
        <ul class="tabs is-menu">
          <li class="tab is-active" data-target="base">
            <a class="tab-link" href="#" rel="noopener">
              <span class="icon is-medium is-menu">
                <svg id="svgMenu"><use href="#menu"></use></svg>
              </span>
              <span>메뉴</span>
            </a>
          </li>
          <li class="tab" data-target="fav">
            <a class="tab-link" href="#" rel="noopener">
              <span class="icon is-medium is-menu">
                <svg id="svgStar"><use href="#star"></use></svg>
              </span>
              <span>즐겨찾기</span>
            </a>
          </li>
        </ul>
        <div class="tab-contents is-menu">
          <div class="tab-content is-menu is-active">
            <ul id="sideMenuDoc" class="menu" style="display: none;">
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener" onclick="loadPage('list')">
                  제조기록서
                </a>
              </li>
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener"  onclick="loadPage($(this).text())">
                  제조기록서 양식
                </a>
              </li>
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener" onclick="loadPage($(this).text())">
                  Log 레포트
                </a>
              </li>
            </ul>
            <ul id="sideMenuCom" class="menu" style="display:none;">
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener" onclick="loadPage($(this).text())">
                  공통코드 관리
                </a>
              </li>
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener">
                  권한 관리
                  <ul class="sub-menu">
                    <li class="sub-menu-item">
                      <a class="sub-menu-link" href="#" rel="noopener" onclick="loadPage($(this).text())">권한 그룹</a>
                    </li>
                    <li class="sub-menu-item">
                      <a class="sub-menu-link" href="#" rel="noopener" onclick="loadPage($(this).text())">권한 별 유저</a>
                    </li>
                    <li class="sub-menu-item">
                      <a class="sub-menu-link" href="#" rel="noopener" onclick="loadPage($(this).text())">권한 별 메뉴</a>
                    </li>
                  </ul>
                </a>
              </li>
              <li class="menu-item">
                <a class="menu-link" href="#" aria-current="page" rel="noopener" onclick="loadPage($(this).text())">
                  사용자 관리
                </a>
              </li>
            </ul>
            <ul id="sideMenuFav" class="menu" style="display: none;">
            </ul>
          </div>
          <div class="tab-content is-favorite">
            <ul id="favoriteMenu" class="favorite"></ul>
          </div>
        </div>
      </aside>
      <div class="page" id="mainContent">
        <!-- 메인 페이지 시작... -->
        <!-- 1(S) -->
        <div class="content" id="docList" style="display: none;">
          <div class="page is-main">
            <div class="page-body">
              <div class="card is-sub is-search">
                <div class="card-header">
                  <h1 class="page-title">제조기록서</h1>
                </div>
                <div class="card-body">
                  <table id="searchTable" class="table is-search is-fullwidth">
                    <colgroup>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 7.4%;"/>
                    </colgroup>
                    <tbody>
                    <tr>
                      <th><span>등록일자</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th><span>공정번호</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th></th>
                      <td></td>
                      <td rowspan="2">
                        <button type="button" id="btnSearch" class="button is-search is-filled is-medium">
                            <span class="icon is-search is-medium">
                                <svg><use href="#search"></use></svg>
                            </span>
                          <span>조회</span>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <th><span>제조번호</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th><span>품목</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th></th>
                      <td></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="card is-sub">
                <div class="card-body">
                  <div class="columns has-gap">
                    <div class="column">
                      <div class="form">
                        <div class="columns has-table-title">
                          <h2 class="table-title">
                            <span>제조기록서</span>
                            <span class="data-count">1<span></span>건</span>
                          </h2>
                          <div class="buttons">
                            <input type="file" id="upload_files" style="display: none;">
                            <button type="button" class="button is-outline is-primary is-medium" style="margin-right: 10px;" onclick="loadPage('update')">
                              양식 등록
                            </button>
                            <button type="button" class="button is-outline is-primary is-medium" onclick="alert('미구현 기능입니다.');">
                              <span class="icon is-excel is-medium"><svg><use href="#excel"></use></svg></span>
                              <span>버튼2</span>
                            </button>
                          </div>
                        </div>
                        <div id="leavDayGrid" class="realgrid" style="height: 600rem;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- 1(E) -->

        <!-- 2(S) -->
        <div class="content" id="emptyForm" style="display: none;">
          <div class="page is-main">
            <div class="page-body">
              <div class="card is-sub is-search">
                <div class="card-header">
                  <h1 class="page-title" id="emptyTitle">빈페이지</h1>
                </div>
                <div class="card-body">
                  <table id="searchTable" class="table is-search is-fullwidth">
                    <colgroup>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 9%;"/>
                      <col/>
                      <col style="width: 7.4%;"/>
                    </colgroup>
                    <tbody>
                    <tr>
                      <th><span>검색조건1</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th><span>검색조건2</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th></th>
                      <td></td>
                      <td rowspan="2">
                        <button type="button" id="btnSearch" class="button is-search is-filled is-medium" disabled>
                            <span class="icon is-search is-medium">
                                <svg><use href="#search"></use></svg>
                            </span>
                          <span>조회</span>
                        </button>
                      </td>
                    </tr>
                    <tr>
                      <th><span>검색조건3</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th><span>검색조건4</span></th>
                      <td>
                        <input type="text" class="input"/>
                      </td>
                      <th></th>
                      <td></td>
                    </tr>
                    </tbody>
                  </table>
                </div>
              </div>

              <div class="card is-sub">
                <div class="card-body">
                  <div class="columns has-gap">
                    <div class="column">
                      <div class="form">
                        <div class="columns has-table-title">
                          <h2 class="table-title">
                            <span>검색결과</span>
                            <span class="data-count">x<span></span>건</span>
                          </h2>
                        </div>
                        <div style="height: 600rem;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- 2(E) -->
        <!-- 메인 페이지 끝... -->
      </div>
    </div>
  </div>
</div>

<script th:inline="javascript">

  $(document).ready(function() {
    setSvg();
    initEvent();
  })  //document.ready

  function setSvg() {
    const svgPath = "/img/svg/"; // SVG 파일 경로

    $("svg").each(function () {
      const $svg = $(this);
      const symbolId = $svg.find("use").attr("href").replace("#", ""); // href 값에서 # 제거
      const filePath = `${svgPath}${symbolId}.svg`; // 파일 경로 만들기

      // SVG 파일 불러와서 대체
      $.get(filePath, function (data) {
        const svgContent = $(data).find("svg").html(); // SVG 내부 내용만 가져오기
        $svg.html(svgContent); // 기존 <use>를 대체
      });
    });
  } //setSvg


  function initEvent() {
    //GNB
    $("#headerMenu .navbar-item").click(function() {
      $("#headerMenu .navbar-item").removeClass("is-active");

      // 클릭한 li에 is-active 추가
      $(this).addClass("is-active");
      if($(this).data('target') == 'dom') {
        $("#sideMenuCom").hide();
        $("#sideMenuFav").hide();
        $("#sideMenuDoc").show();
      }else if($(this).data('target') == 'com') {
        $("#sideMenuDoc").hide();
        $("#sideMenuFav").hide();
        $("#sideMenuCom").show();
      }
    });

    //LNB
    $("ul.menu .menu-item").click(function() {
      let isAlreadyActive = $(this).hasClass('is-active');
      if(!isAlreadyActive) {
        $(".sub-menu-item").removeClass('is-active');
        $("ul.menu .menu-item").removeClass('is-active');
        $(this).addClass('is-active');
      }
    });

    //LNB
    $("ul.menu .menu-item .sub-menu .sub-menu-item").click(function() {
      let isAlreadyActive = $(this).hasClass('is-active');
      if(!isAlreadyActive) {
        $(".sub-menu-item").removeClass('is-active');
        $(this).addClass('is-active');
      }
    });

    //TABS(메뉴/즐겨찾기)
    $("ul.tabs .tab").click(function() {
      $("ul.tabs .tab").removeClass('is-active');
      $(this).addClass('is-active');

      if($(this).data('target') == 'base') {
        let gnb = $("#headerMenu .navbar-item.is-active").data("target");
        if(gnb && gnb == 'dom') {
          $("#sideMenuCom").hide();
          $("#sideMenuFav").hide();
          $("#sideMenuDoc").show();
        }else if(gnb && gnb == 'com') {
          $("#sideMenuDoc").hide();
          $("#sideMenuFav").hide();
          $("#sideMenuCom").show();
        }else {
          $("#sideMenuDoc").hide();
          $("#sideMenuFav").hide();
          $("#sideMenuCom").hide();
        }
      }else if($(this).data('target') == 'fav') {
        $("#sideMenuDoc").hide();
        $("#sideMenuCom").hide();
        $("#sideMenuFav").show();
      }
    });
  } //initEvent

  function loadPage(type) {
    if (type === 'list') {
      $("#emptyForm").fadeOut(300).promise().done(function() {
        $("#docList").fadeIn(300);
      });
    } else if (type === 'detail') {
      $("#docList, #emptyForm").fadeOut(300).promise().done(function() {
        console.log("detail 뷰 로딩 완료");
      });
    } else if (type === 'update') {
      $("#docList, #emptyForm").fadeOut(300).promise().done(function() {
        console.log("update 뷰 로딩 완료");
      });
    } else {
      $("#docList, #emptyForm").fadeOut(300).promise().done(function() {
        $("#emptyTitle").text(type);
        $("#emptyForm").fadeIn(300);
      });
    }
  }


</script>
</body>

</html>